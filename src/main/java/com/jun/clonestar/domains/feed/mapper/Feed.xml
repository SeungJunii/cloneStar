<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd">
<mapper namespace="Feed">
    
    <!--<resultMap id="userMap" type="com.jun.clonestar.domains.User.DTO.entity.UserEntity">
        <result column="id" property="id"/>
        <result column="profileimgurl" property="profileImgUrl"/>
    </resultMap>

    <resultMap id="feedMap" type="com.jun.clonestar.domains.feed.DTO.entity.FeedEntity">
        <result column="id" property="id"/>
        <result column="account" property="account"/>
        <result column="realName" property="realName"/>
        <result column="nickName" property="nickName"/>
        <result column="picture" property="picture"/>
        <result column="location" property="location"/>
        <result column="tag" property="tag"/>
    </resultMap>-->

    <insert id="insert" parameterType="com.jun.clonestar.domains.feed.DTO.entity.FeedEntity" useGeneratedKeys="true" keyProperty="num">
        INSERT INTO feed(
        account,
        realName,
        nickName,
        picture,
        caption,
        location,
        tag,
        likeNum,
        profileImgUrl,
        time
        ) VALUES(
        #{account},
        #{realName},
        #{nickName},
        #{picture},
        #{caption},
        #{location},
        #{tag},
        #{likeNum},
        #{profileImgUrl},
        now()
        )
    </insert>

    <select id="feedList" resultType="com.jun.clonestar.domains.feed.DTO.entity.FeedEntity">
        SELECT
            f.num,
            f.account,
            f.realName,
            f.nickName,
            f.picture,
            f.caption,
            f.location,
            f.tag,
            f.likeNum,
            u.profileimgurl,
            u.id
        FROM feed as f
        join user as u
        on f.account = u.userAccount
        ORDER BY f.num DESC
    </select>

    <select id="getFeedByAccount"  parameterType ="String"  resultType="com.jun.clonestar.domains.feed.DTO.entity.FeedEntity">
        SELECT
            f.num,
            f.account,
            f.realName,
            f.picture,
            f.caption,
            f.location,
            f.tag,
            f.likeNum,
            u.profileimgurl,
            u.id
        FROM feed as f
        join user as u
        on f.account = u.userAccount
        WHERE  u.userAccount=#{userAccount}
        ORDER BY f.num DESC
    </select>
</mapper>